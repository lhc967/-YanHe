<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒšãƒ¼ã‚¸ - è¨€ç¦¾ YanHe</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root { --primary: #0052cc; --dark: #091e42; --bg-light: #f4f5f7; }
        body { background: var(--bg-light); font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; padding-top: 76px; color: var(--dark); }

        /* Navbar */
        .navbar-custom { background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.05); height: 76px; z-index: 1000; }
        .navbar-brand { font-weight: 900; font-size: 1.6rem; color: var(--primary) !important; letter-spacing: -0.5px; }
        .nav-link { font-weight: 600; color: #505f79 !important; }
        .nav-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 2px solid #ebecf0; cursor: pointer; }

        /* Header */
        .profile-header { position: relative; margin-bottom: 20px; background: #fff; }
        .banner-img {
            width: 100%; height: 200px; object-fit: cover;
            background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
        }
        .user-info-bar { padding: 0 30px 20px; display: flex; align-items: flex-end; position: relative; margin-top: -50px; }

        .avatar-wrapper {
            position: relative; width: 100px; height: 100px; border-radius: 50%;
            border: 4px solid #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 2; cursor: pointer;
        }
        .big-avatar { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; background: #fff; }
        .avatar-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.5); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; color: #fff;
            opacity: 0; transition: 0.2s; font-size: 1.5rem;
        }
        .avatar-wrapper:hover .avatar-overlay { opacity: 1; }

        .user-meta { margin-left: 20px; flex: 1; padding-bottom: 5px; }
        .user-name { font-size: 1.5rem; font-weight: 800; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .user-bio { color: #5e6c84; font-size: 0.95rem; margin-top: 10px; max-width: 600px; }
        .stats-box { display: flex; gap: 20px; margin-top: 5px; }
        .stat-item { font-size: 0.9rem; color: #fff; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }

        .btn-edit {
            border: 1px solid #dfe1e6; background: #fff; color: #505f79;
            padding: 6px 20px; border-radius: 4px; font-weight: 600; font-size: 0.9rem; transition: 0.2s;
        }
        .btn-edit:hover { background: #ebecf0; color: var(--dark); }

        /* Tabs */
        .profile-tabs { background: #fff; padding: 0 30px; border-bottom: 1px solid #ebecf0; display: flex; gap: 30px; }
        .tab-item { padding: 15px 5px; font-weight: 600; color: #5e6c84; cursor: pointer; border-bottom: 3px solid transparent; }
        .tab-item.active { color: var(--primary); border-bottom-color: var(--primary); }

        /* Content Area */
        .content-area { padding: 30px; max-width: 1200px; margin: 0 auto; }

        /* Learning Cards */
        .course-progress-card {
            background: #fff; border-radius: 12px; padding: 20px; border: 1px solid #ebecf0;
            display: flex; gap: 20px; margin-bottom: 20px; transition: 0.2s; cursor: pointer; text-decoration: none; color: inherit;
        }
        .course-progress-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); border-color: var(--primary); }
        .course-thumb { width: 160px; height: 100px; border-radius: 8px; object-fit: cover; }

        /* Video Grid (My Posts) */
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .video-card {
            background: #fff; border-radius: 12px; overflow: hidden; cursor: pointer; position: relative;
            transition: 0.2s; aspect-ratio: 9/14;
        }
        .video-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        .video-overlay {
            position: absolute; bottom: 0; left: 0; right: 0; padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); color: #fff;
        }

        /* Collection Grid */
        .collection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .collection-card {
            background: #fff; border-radius: 12px; overflow: hidden; border: 1px solid #ebecf0;
            transition: 0.2s; cursor: pointer;
        }
        .collection-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.05); }
        .collection-img { height: 160px; width: 100%; object-fit: cover; }
        .collection-body { padding: 15px; }

        /* Modal */
        .modal-post-content { display: flex; height: 80vh; overflow: hidden; border-radius: 12px; }
        .post-media { flex: 1.5; background: #000; display: flex; align-items: center; justify-content: center; position: relative; }
        .post-media img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .post-sidebar { flex: 1; background: #fff; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
        .comment-item { display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.9rem; }
        .comment-avatar { width: 32px; height: 32px; border-radius: 50%; }

        @media (max-width: 768px) {
            .modal-post-content { flex-direction: column; height: auto; }
            .post-media { height: 300px; }
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top navbar-custom">
        <div class="container-fluid px-4">
            <a class="navbar-brand" href="home_en.html">YanHe</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item"><a class="nav-link" href="education_en.html">æ•™è‚²ã‚¯ãƒ©ã‚¦ãƒ‰</a></li>
                    <li class="nav-item"><a class="nav-link" href="service_en.html">ã‚¿ã‚¹ã‚¯åºƒå ´</a></li>
                    <li class="nav-item"><a class="nav-link" href="story_en.html">ä¸­å›½ã®ç‰©èª</a></li>
                    <li class="nav-item"><a class="nav-link" href="culture_en.html">æ–¹è¨€ãƒãƒƒãƒ—</a></li>
                </ul>
            </div>
            <div class="dropdown">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="nav-avatar dropdown-toggle" id="navAvatarImg" data-bs-toggle="dropdown">
                <ul class="dropdown-menu dropdown-menu-end border-0 shadow mt-2">
                    <li><h6 class="dropdown-header">Felix Schneider</h6></li>
                    <li><a class="dropdown-item" href="auth.profile_en.html"><i class="bi bi-person me-2"></i>ãƒã‚¤ãƒšãƒ¼ã‚¸</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-danger" href="home_en.html">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="profile-header">
        <div class="banner-img"></div>
        <div class="user-info-bar">
            <div class="avatar-wrapper" onclick="openEditModal()">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="big-avatar" id="headerAvatar">
                <div class="avatar-overlay"><i class="bi bi-camera-fill"></i></div>
            </div>

            <div class="user-meta">
                <div class="user-name">
                    <span id="displayName">Felix Schneider</span>
                    <span class="badge bg-warning text-dark align-middle" style="font-size:0.7rem;">Lv.5</span>
                </div>
                <div class="stats-box">
                    <div class="stat-item">128 <span>ãƒ•ã‚©ãƒ­ãƒ¼ä¸­</span></div>
                    <div class="stat-item">3.5k <span>ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼</span></div>
                    <div class="stat-item">58 <span>ä¿å­˜æ¸ˆã¿</span></div>
                </div>
                <div class="user-bio" id="displayBio">ãƒ“ã‚¸ãƒã‚¹ä¸­å›½èªã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†ä¸­ã€‚ç¾åœ¨ä¸Šæµ·ã«æ»åœ¨ä¸­ã€‚ğŸ“</div>
            </div>
            <button class="btn-edit" onclick="openEditModal()">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†</button>
        </div>

        <div class="profile-tabs">
            <div class="tab-item active" onclick="switchTab('learning', this)">å­¦ç¿’ä¸­</div>
            <div class="tab-item" onclick="switchTab('posts', this)">æŠ•ç¨¿</div>
            <div class="tab-item" onclick="switchTab('collections', this)">ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</div>
        </div>
    </div>

    <div class="content-area">

        <div id="tab-learning" class="tab-content-section">
            <h5 class="fw-bold mb-3">å­¦ç¿’ã‚’ç¶šã‘ã‚‹</h5>

            <a href="course_detail_en.html" class="course-progress-card">
                <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300" class="course-thumb">
                <div class="flex-fill">
                    <div class="d-flex justify-content-between mb-1">
                        <div class="fw-bold">ãƒ“ã‚¸ãƒã‚¹ä¸­å›½èªï¼šäº¤æ¸‰è¡“</div>
                        <span class="text-primary fw-bold">75%</span>
                    </div>
                    <div class="progress mb-2" style="height: 6px;">
                        <div class="progress-bar" style="width: 75%"></div>
                    </div>
                    <div class="small text-muted">æ¬¡å›: ä¾¡æ ¼æˆ¦ç•¥ â€¢ <span class="text-primary fw-bold">å†é–‹</span></div>
                </div>
            </a>

            <a href="review_en.html" class="course-progress-card">
                <img src="https://images.unsplash.com/photo-1596797038530-2c107229654b?w=300" class="course-thumb">
                <div class="flex-fill">
                    <div class="d-flex justify-content-between mb-1">
                        <div class="fw-bold">æ—¥ã€…ã®ã‚¹ãƒãƒ¼ãƒˆå˜èªå¾©ç¿’</div>
                        <span class="text-success fw-bold">30%</span>
                    </div>
                    <div class="progress mb-2" style="height: 6px;">
                        <div class="progress-bar bg-success" style="width: 30%"></div>
                    </div>
                    <div class="small text-muted">å¾©ç¿’å˜èªï¼š12å€‹ â€¢ <span class="text-success fw-bold">é–‹å§‹</span></div>
                </div>
            </a>
        </div>

        <div id="tab-posts" class="tab-content-section d-none">
            <h5 class="fw-bold mb-3">å‹•ç”»æŠ•ç¨¿</h5>
            <div class="video-grid">
                <div class="video-card" onclick="openPostModal('ä¸Šæµ·æ—…è¡Œ ğŸ™ï¸', 'https://images.unsplash.com/photo-1514565131-fce0801e5785?w=600')">
                    <img src="https://images.unsplash.com/photo-1514565131-fce0801e5785?w=400" style="width:100%;height:100%;object-fit:cover;">
                    <div class="video-overlay">
                        <div class="fw-bold mb-1">ä¸Šæµ·æ—…è¡Œ ğŸ™ï¸</div>
                        <small><i class="bi bi-play-fill"></i> 12.5k</small>
                    </div>
                </div>
                <div class="video-card" onclick="openPostModal('æ¿€è¾›æ–™ç†ãƒãƒ£ãƒ¬ãƒ³ã‚¸ ğŸŒ¶ï¸', 'https://images.unsplash.com/photo-1563245372-f21720e38c4d?w=600')">
                    <img src="https://images.unsplash.com/photo-1563245372-f21720e38c4d?w=400" style="width:100%;height:100%;object-fit:cover;">
                    <div class="video-overlay">
                        <div class="fw-bold mb-1">æ¿€è¾›æ–™ç†ãƒãƒ£ãƒ¬ãƒ³ã‚¸ ğŸŒ¶ï¸</div>
                        <small><i class="bi bi-play-fill"></i> 8.2k</small>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-collections" class="tab-content-section d-none">
            <h5 class="fw-bold mb-3">ä¿å­˜ã—ãŸã‚¢ã‚¤ãƒ†ãƒ </h5>
            <div class="collection-grid">
                <div class="collection-card" onclick="openPostModal('ä¼çµ±å»ºç¯‰', 'https://images.unsplash.com/photo-1523730205978-59fd1b2965e3?w=600')">
                    <img src="https://images.unsplash.com/photo-1523730205978-59fd1b2965e3?w=400" class="collection-img">
                    <div class="collection-body">
                        <div class="fw-bold">ä¼çµ±å»ºç¯‰</div>
                        <div class="small text-muted">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚ˆã‚Š</div>
                    </div>
                </div>
                <div class="collection-card" onclick="openPostModal('ç¾ä»£ã‚¢ãƒ¼ãƒˆ 798', 'https://images.unsplash.com/photo-1543165365-07232fe12224?w=600')">
                    <img src="https://images.unsplash.com/photo-1543165365-07232fe12224?w=400" class="collection-img">
                    <div class="collection-body">
                        <div class="fw-bold">ç¾ä»£ã‚¢ãƒ¼ãƒˆ 798</div>
                        <div class="small text-muted">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚ˆã‚Š</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="editModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4 text-center">
                        <div class="d-inline-block position-relative">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" id="editAvatarPreview" width="80" class="rounded-circle mb-2 border">
                            <br>
                            <button type="button" class="btn btn-sm btn-outline-primary rounded-pill mt-2" onclick="randomizeAvatar()">
                                <i class="bi bi-shuffle"></i> ã‚¢ãƒã‚¿ãƒ¼ã‚’ãƒ©ãƒ³ãƒ€ãƒ å¤‰æ›´
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">è¡¨ç¤ºå</label>
                        <input type="text" class="form-control" id="inputName" value="Felix Schneider">
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">è‡ªå·±ç´¹ä»‹</label>
                        <textarea class="form-control" id="inputBio" rows="3">ãƒ“ã‚¸ãƒã‚¹ä¸­å›½èªã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†ä¸­ã€‚ç¾åœ¨ä¸Šæµ·ã«æ»åœ¨ä¸­ã€‚ğŸ“</textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">ä¿å­˜ã™ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="postModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content overflow-hidden">
                <div class="modal-body p-0">
                    <div class="modal-post-content">
                        <div class="post-media">
                            <img id="postImage" src="" alt="Post">
                        </div>
                        <div class="post-sidebar">
                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <div class="d-flex align-items-center gap-2">
                                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" width="32" class="rounded-circle">
                                    <span class="fw-bold small">Felix</span>
                                </div>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <h5 class="fw-bold mb-3" id="postTitle">Title</h5>
                            <p class="small text-muted mb-4">ãŸã£ãŸä»ŠæŠ•ç¨¿</p>
                            <hr>
                            <div class="mt-auto">
                                <input type="text" class="form-control" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã...">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentAvatarSeed = 'Felix';

        // 1. Tab Switching Logic
        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content-section').forEach(d => d.classList.add('d-none'));
            document.getElementById('tab-' + tabId).classList.remove('d-none');
            document.querySelectorAll('.tab-item').forEach(d => d.classList.remove('active'));
            el.classList.add('active');
        }

        // 2. Open Edit Modal
        function openEditModal() {
            var myModal = new bootstrap.Modal(document.getElementById('editModal'));
            myModal.show();
        }

        // 3. Randomize Avatar in Modal
        function randomizeAvatar() {
            const seeds = ['Felix', 'Max', 'Luna', 'Zoe', 'Jack', 'Leo', 'Bella'];
            currentAvatarSeed = seeds[Math.floor(Math.random() * seeds.length)];
            document.getElementById('editAvatarPreview').src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${currentAvatarSeed}`;
        }

        // 4. Save Profile Changes
        function saveProfile() {
            const name = document.getElementById('inputName').value;
            const bio = document.getElementById('inputBio').value;
            document.getElementById('displayName').innerText = name;
            document.getElementById('displayBio').innerText = bio;

            const newSrc = `https://api.dicebear.com/7.x/avataaars/svg?seed=${currentAvatarSeed}`;
            document.getElementById('headerAvatar').src = newSrc;
            document.getElementById('navAvatarImg').src = newSrc;

            const modalEl = document.getElementById('editModal');
            const modal = bootstrap.Modal.getInstance(modalEl);
            modal.hide();
        }

        // 5. Open Post/Collection Detail
        function openPostModal(title, imgSrc) {
            document.getElementById('postTitle').innerText = title;
            document.getElementById('postImage').src = imgSrc;
            var myModal = new bootstrap.Modal(document.getElementById('postModal'));
            myModal.show();
        }
    </script>
</body>
</html>
